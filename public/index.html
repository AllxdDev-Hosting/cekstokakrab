<!DOCTYPE html>
<html lang="id">
<head>
  <meta charset="UTF-8">
  <title>Cek Stock XDA & Akrab</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      margin: 20px;
      background: #f5f5f5;
    }
    h1 {
      margin-bottom: 5px;
    }
    h2 {
      margin-top: 30px;
    }
    .card {
      background: #fff;
      padding: 15px 20px;
      border-radius: 8px;
      box-shadow: 0 2px 6px rgba(0,0,0,0.08);
      margin-bottom: 20px;
    }
    table {
      width: 100%;
      border-collapse: collapse;
      margin-top: 10px;
    }
    th, td {
      border: 1px solid #ddd;
      padding: 8px 10px;
      text-align: left;
      font-size: 14px;
    }
    th {
      background: #eee;
    }
    tr:nth-child(even) {
      background: #fafafa;
    }
    .empty {
      color: #777;
      font-style: italic;
      margin-top: 5px;
    }
    .status-badge {
      display: inline-block;
      padding: 2px 8px;
      border-radius: 12px;
      font-size: 11px;
      font-weight: bold;
    }
    .badge-ada {
      background: #d4edda;
      color: #155724;
    }
    .badge-habis {
      background: #f8d7da;
      color: #721c24;
    }
    .stock-zero {
      color: #c0392b;
      font-weight: bold;
    }
  </style>
</head>
<body>

  <h1>Cek Stock</h1>
  <div>Data dari dua API: <code>Tess.php</code> dan <code>cek_stock_akrab</code>.</div>

  <!-- CARD 1: allxddev.com -->
  <div class="card">
    <h2>Stock XDA (allxddev.com/tes/Tess.php)</h2>
    <div id="xda-loading">Loading data...</div>
    <div id="xda-container" style="display:none;">
      <table>
        <thead>
          <tr>
            <th>Kode</th>
            <th>Stock</th>
          </tr>
        </thead>
        <tbody id="xda-body">
          <!-- diisi oleh JS -->
        </tbody>
      </table>
      <div id="xda-empty" class="empty" style="display:none;">Tidak ada data XDA.</div>
    </div>
  </div>

  <!-- CARD 2: panel.khfy-store.com -->
  <div class="card">
    <h2>Stock Akrab (panel.khfy-store.com/api_v3/cek_stock_akrab)</h2>
    <div id="akrab-loading">Loading data...</div>
    <div id="akrab-container" style="display:none;">
      <table>
        <thead>
          <tr>
            <th>Type</th>
            <th>Nama</th>
            <th>Sisa Slot</th>
            <th>Status</th>
          </tr>
        </thead>
        <tbody id="akrab-body">
          <!-- diisi oleh JS -->
        </tbody>
      </table>
      <div id="akrab-empty" class="empty" style="display:none;">Tidak ada data Akrab.</div>
    </div>
  </div>

  <script>
    // --- API 1: XDA / Tess.php ---
    fetch('https://allxddev.com/tes/Tess.php')
      .then(res => res.json())
      .then(json => {
        document.getElementById('xda-loading').style.display = 'none';
        document.getElementById('xda-container').style.display = 'block';

        const tbody = document.getElementById('xda-body');
        const xdaData = json.xda || [];

        if (!xdaData.length) {
          document.getElementById('xda-empty').style.display = 'block';
          return;
        }

        xdaData.forEach(item => {
          const tr = document.createElement('tr');

          const tdKode = document.createElement('td');
          tdKode.textContent = item.kode;

          const tdStock = document.createElement('td');
          tdStock.textContent = item.stock;
          if (Number(item.stock) === 0) {
            tdStock.classList.add('stock-zero');
          }

          tr.appendChild(tdKode);
          tr.appendChild(tdStock);
          tbody.appendChild(tr);
        });
      })
      .catch(err => {
        document.getElementById('xda-loading').textContent = 'Gagal mengambil data XDA: ' + err;
      });

    // --- API 2: cek_stock_akrab ---
    fetch('https://panel.khfy-store.com/api_v3/cek_stock_akrab')
      .then(res => res.json())
      .then(json => {
        document.getElementById('akrab-loading').style.display = 'none';
        document.getElementById('akrab-container').style.display = 'block';

        const tbody = document.getElementById('akrab-body');
        const data = json.data || [];

        if (!data.length) {
          document.getElementById('akrab-empty').style.display = 'block';
          return;
        }

        data.forEach(item => {
          const tr = document.createElement('tr');

          const tdType = document.createElement('td');
          tdType.textContent = item.type;

          const tdNama = document.createElement('td');
          tdNama.textContent = item.nama;

          const tdSlot = document.createElement('td');
          tdSlot.textContent = item.sisa_slot;
          if (Number(item.sisa_slot) === 0) {
            tdSlot.classList.add('stock-zero');
          }

          const tdStatus = document.createElement('td');
          const span = document.createElement('span');
          span.classList.add('status-badge');
          if (Number(item.sisa_slot) > 0) {
            span.classList.add('badge-ada');
            span.textContent = 'Tersedia';
          } else {
            span.classList.add('badge-habis');
            span.textContent = 'Habis';
          }
          tdStatus.appendChild(span);

          tr.appendChild(tdType);
          tr.appendChild(tdNama);
          tr.appendChild(tdSlot);
          tr.appendChild(tdStatus);

          tbody.appendChild(tr);
        });
      })
      .catch(err => {
        document.getElementById('akrab-loading').textContent = 'Gagal mengambil data Akrab: ' + err;
      });
  </script>
</body>
</html>
